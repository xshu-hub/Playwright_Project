# Playwrightè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶æŠ€æœ¯æ–¹æ¡ˆè®²è§£

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºPlaywrightçš„Webè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œé›†æˆäº†Allureæµ‹è¯•æŠ¥å‘Šã€æ—¥å¿—ç®¡ç†ã€æˆªå›¾å½•åˆ¶ç­‰åŠŸèƒ½ï¼Œä¸ºWebåº”ç”¨æä¾›å…¨é¢çš„è‡ªåŠ¨åŒ–æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚

### 1.2 æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒæ¡†æ¶**: Playwright (Python)
- **æµ‹è¯•æ¡†æ¶**: Pytest
- **æŠ¥å‘Šå·¥å…·**: Allure Framework
- **æ—¥å¿—ç®¡ç†**: Loguru
- **é…ç½®ç®¡ç†**: YAML
- **å¼€å‘è¯­è¨€**: Python 3.11+

### 1.3 é¡¹ç›®ç‰¹ç‚¹
- ğŸ¯ **å¤šæµè§ˆå™¨æ”¯æŒ**: Chromiumã€Firefoxã€Safari
- ğŸ“Š **ä¸°å¯Œçš„æµ‹è¯•æŠ¥å‘Š**: é›†æˆAllureç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
- ğŸ“¸ **è‡ªåŠ¨åŒ–æˆªå›¾å½•åˆ¶**: å¤±è´¥æ—¶è‡ªåŠ¨æ•è·è¯æ®
- ğŸ”§ **çµæ´»çš„é…ç½®ç®¡ç†**: æ”¯æŒå¤šç¯å¢ƒé…ç½®
- ğŸ“ **å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ**: åˆ†çº§æ—¥å¿—è®°å½•å’Œç®¡ç†
- ğŸ—ï¸ **æ¨¡å—åŒ–æ¶æ„**: æ¸…æ™°çš„ä»£ç ç»„ç»‡ç»“æ„

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Playwrightæµ‹è¯•æ¡†æ¶                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æµ‹è¯•å±‚ (Test Layer)                                        â”‚
â”‚  â”œâ”€â”€ test_group_1/  (ç™»å½•åŠŸèƒ½æµ‹è¯•)                          â”‚
â”‚  â”œâ”€â”€ test_group_2/  (é”™è¯¯å¤„ç†æµ‹è¯•)                          â”‚
â”‚  â””â”€â”€ test_group_3/  (UIå…ƒç´ æµ‹è¯•)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¡µé¢å¯¹è±¡å±‚ (Page Object Layer)                             â”‚
â”‚  â”œâ”€â”€ login_page.py                                         â”‚
â”‚  â”œâ”€â”€ dashboard_page.py                                     â”‚
â”‚  â””â”€â”€ base_page.py                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                          â”‚
â”‚  â”œâ”€â”€ BaseTest (æµ‹è¯•åŸºç±»)                                    â”‚
â”‚  â”œâ”€â”€ Utils (å·¥å…·ç±»)                                        â”‚
â”‚  â””â”€â”€ Config (é…ç½®ç®¡ç†)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŠ¥å‘Šå’Œç›‘æ§å±‚ (Reporting & Monitoring)                      â”‚
â”‚  â”œâ”€â”€ Allure Reports                                        â”‚
â”‚  â”œâ”€â”€ Screenshot Helper                                     â”‚
â”‚  â”œâ”€â”€ Video Helper                                          â”‚
â”‚  â””â”€â”€ Logger System                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç»„ä»¶

#### 2.2.1 æµ‹è¯•åŸºç±» (BaseTest)
```python
class BaseTest(unittest.TestCase):
    """
    æµ‹è¯•åŸºç±»ï¼Œæä¾›ï¼š
    - Playwrightæµè§ˆå™¨ç®¡ç†
    - è‡ªåŠ¨æˆªå›¾å’Œå½•åˆ¶
    - Allureé›†æˆ
    - æ—¥å¿—è®°å½•
    - é…ç½®ç®¡ç†
    """
```

**æ ¸å¿ƒåŠŸèƒ½**:
- æµè§ˆå™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- è‡ªåŠ¨åŒ–æˆªå›¾å’Œè§†é¢‘å½•åˆ¶
- Allureæ­¥éª¤è®°å½•å’ŒæŠ¥å‘Šé›†æˆ
- ç»Ÿä¸€çš„æ—¥å¿—è®°å½•
- æµ‹è¯•ç¯å¢ƒé…ç½®

#### 2.2.2 é¡µé¢å¯¹è±¡æ¨¡å¼ (Page Object Model)
```python
class BasePage:
    """
    é¡µé¢åŸºç±»ï¼Œæä¾›ï¼š
    - é€šç”¨é¡µé¢æ“ä½œ
    - å…ƒç´ å®šä½å°è£…
    - ç­‰å¾…æœºåˆ¶
    """

class LoginPage(BasePage):
    """
    ç™»å½•é¡µé¢ç±»ï¼Œå°è£…ï¼š
    - ç™»å½•ç›¸å…³å…ƒç´ 
    - ç™»å½•æ“ä½œæ–¹æ³•
    - éªŒè¯æ–¹æ³•
    """
```

#### 2.2.3 å·¥å…·ç±»ç³»ç»Ÿ
- **ScreenshotHelper**: æˆªå›¾ç®¡ç†å’ŒAllureé›†æˆ
- **VideoHelper**: è§†é¢‘å½•åˆ¶å’Œå¤±è´¥æ—¶ä¿å­˜
- **ConfigManager**: é…ç½®æ–‡ä»¶ç®¡ç†
- **LoggerConfig**: æ—¥å¿—ç³»ç»Ÿé…ç½®

## 3. æ ¸å¿ƒæŠ€æœ¯å®ç°

### 3.1 æµè§ˆå™¨ç®¡ç†ç­–ç•¥

#### 3.1.1 ä¼šè¯çº§æµè§ˆå™¨å¤ç”¨
```python
@classmethod
def setUpClass(cls):
    """ç±»çº§åˆ«è®¾ç½®ï¼Œå¤ç”¨æµè§ˆå™¨å®ä¾‹"""
    if cls._playwright is None:
        cls._playwright = sync_playwright().start()
        cls._browser = cls._playwright.chromium.launch(
            headless=False,
            args=['--start-maximized']
        )
```

**ä¼˜åŠ¿**:
- å‡å°‘æµè§ˆå™¨å¯åŠ¨æ—¶é—´
- æé«˜æµ‹è¯•æ‰§è¡Œæ•ˆç‡
- é™ä½èµ„æºæ¶ˆè€—

#### 3.1.2 ä¸Šä¸‹æ–‡éš”ç¦»
```python
def setUp(self):
    """æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åˆ›å»ºç‹¬ç«‹ä¸Šä¸‹æ–‡"""
    self.context = self._browser.new_context(
        viewport={'width': 1920, 'height': 1080},
        record_video_dir=str(self.get_session_dir() / "videos")
    )
    self.page = self.context.new_page()
```

### 3.2 Allureé›†æˆæ–¹æ¡ˆ

#### 3.2.1 è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ
```python
def pytest_runtest_makereport(item, call):
    """Pytesté’©å­ï¼Œè‡ªåŠ¨é™„åŠ æµ‹è¯•ä¿¡æ¯åˆ°Allure"""
    if call.when == "call":
        # é™„åŠ æµ‹è¯•æ—¥å¿—
        test_logs = _get_test_logs(test_instance)
        if test_logs:
            allure.attach(test_logs, "æµ‹è¯•æ—¥å¿—", allure.attachment_type.TEXT)
        
        # å¤±è´¥æ—¶é™„åŠ æˆªå›¾å’Œè§†é¢‘
        if rep.failed:
            _attach_failure_evidence(test_instance)
```

#### 3.2.2 æ­¥éª¤è®°å½•æœºåˆ¶
```python
@staticmethod
def allure_step(step_name: str):
    """Allureæ­¥éª¤è£…é¥°å™¨"""
    return allure.step(step_name)

def attach_screenshot(self, name: str = "Screenshot"):
    """é™„åŠ æˆªå›¾åˆ°AllureæŠ¥å‘Š"""
    if hasattr(self, 'page') and not self.page.is_closed():
        screenshot = self.page.screenshot()
        allure.attach(screenshot, name, allure.attachment_type.PNG)
```

### 3.3 é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

#### 3.3.1 è‡ªåŠ¨æˆªå›¾å’Œå½•åˆ¶
```python
def tearDown(self):
    """æµ‹è¯•æ¸…ç†ï¼Œè‡ªåŠ¨å¤„ç†å¤±è´¥æƒ…å†µ"""
    test_failed = hasattr(self, '_outcome') and self._outcome.errors
    
    if test_failed:
        # è‡ªåŠ¨æˆªå›¾
        self._take_failure_screenshot()
        
        # ä¿å­˜è§†é¢‘
        video_path = self.video_helper.save_video_on_failure(
            self.page, test_name, "Test failed"
        )
```

#### 3.3.2 æ™ºèƒ½ç­‰å¾…æœºåˆ¶
```python
def wait_for_page_load(self, timeout: int = 30000):
    """æ™ºèƒ½é¡µé¢åŠ è½½ç­‰å¾…"""
    with allure.step(f"ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ (è¶…æ—¶: {timeout}ms)"):
        try:
            self.page.wait_for_load_state('networkidle', timeout=timeout)
            self.logger.info("é¡µé¢åŠ è½½å®Œæˆ")
        except Exception as e:
            self.logger.warning(f"é¡µé¢åŠ è½½ç­‰å¾…è¶…æ—¶: {e}")
```

### 3.4 é…ç½®ç®¡ç†ç³»ç»Ÿ

#### 3.4.1 å¤šç¯å¢ƒé…ç½®
```yaml
# config.yaml
environments:
  dev:
    base_url: "http://localhost:8080"
    timeout: 30000
  test:
    base_url: "http://test.example.com"
    timeout: 60000
  prod:
    base_url: "http://prod.example.com"
    timeout: 30000

playwright:
  browser: "chromium"
  headless: false
  viewport:
    width: 1920
    height: 1080
```

#### 3.4.2 åŠ¨æ€é…ç½®åŠ è½½
```python
class ConfigManager:
    """é…ç½®ç®¡ç†å™¨"""
    
    @classmethod
    def get_config(cls, env: str = None):
        """è·å–æŒ‡å®šç¯å¢ƒé…ç½®"""
        env = env or os.getenv('TEST_ENV', 'dev')
        return cls._load_config()[env]
```

## 4. æµ‹è¯•ç»„ç»‡ç­–ç•¥

### 4.1 åˆ†ç»„æµ‹è¯•è®¾è®¡

#### 4.1.1 åŠŸèƒ½åˆ†ç»„
```
test_group_1/  # ç™»å½•åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ test_successful_login_admin.py    # ç®¡ç†å‘˜ç™»å½•
â”œâ”€â”€ test_successful_login_user.py     # æ™®é€šç”¨æˆ·ç™»å½•
â”œâ”€â”€ test_logout_functionality.py      # ç™»å‡ºåŠŸèƒ½
â””â”€â”€ test_session_persistence.py       # ä¼šè¯æŒä¹…åŒ–

test_group_2/  # é”™è¯¯å¤„ç†æµ‹è¯•
â”œâ”€â”€ test_invalid_credentials.py       # æ— æ•ˆå‡­æ®
â”œâ”€â”€ test_empty_form_submission.py     # ç©ºè¡¨å•æäº¤
â””â”€â”€ test_multiple_login_attempts.py   # å¤šæ¬¡ç™»å½•å°è¯•

test_group_3/  # UIå…ƒç´ æµ‹è¯•
â”œâ”€â”€ test_login_page_elements.py       # é¡µé¢å…ƒç´ éªŒè¯
â”œâ”€â”€ test_responsive_design.py         # å“åº”å¼è®¾è®¡
â””â”€â”€ test_accessibility.py             # å¯è®¿é—®æ€§æµ‹è¯•
```

#### 4.1.2 æ ‡è®°ç³»ç»Ÿ
```python
@pytest.mark.group1
@pytest.mark.login
@pytest.mark.critical
@allure.feature("ç”¨æˆ·ç®¡ç†")
@allure.story("ç”¨æˆ·ç™»å½•")
@allure.severity(allure.severity_level.CRITICAL)
def test_admin_login(self):
    """ç®¡ç†å‘˜ç™»å½•æµ‹è¯•"""
```

### 4.2 æ•°æ®é©±åŠ¨æµ‹è¯•

#### 4.2.1 å‚æ•°åŒ–æµ‹è¯•
```python
@pytest.mark.parametrize("username,password,expected", [
    ("admin", "admin123", "success"),
    ("user", "user123", "success"),
    ("invalid", "wrong", "failure")
])
def test_login_scenarios(self, username, password, expected):
    """ç™»å½•åœºæ™¯æµ‹è¯•"""
```

## 5. æŠ¥å‘Šå’Œç›‘æ§

### 5.1 AllureæŠ¥å‘Šç‰¹æ€§

#### 5.1.1 æŠ¥å‘Šå†…å®¹
- **æµ‹è¯•æ¦‚è§ˆ**: æ‰§è¡Œç»Ÿè®¡ã€æˆåŠŸç‡ã€è¶‹åŠ¿åˆ†æ
- **è¯¦ç»†ç»“æœ**: æ¯ä¸ªæµ‹è¯•çš„æ‰§è¡Œæ­¥éª¤å’Œç»“æœ
- **å¤±è´¥åˆ†æ**: è‡ªåŠ¨åˆ†ç±»é”™è¯¯ç±»å‹å’ŒåŸå› 
- **ç¯å¢ƒä¿¡æ¯**: æµ‹è¯•ç¯å¢ƒã€æµè§ˆå™¨ç‰ˆæœ¬ç­‰
- **å†å²è¶‹åŠ¿**: å¤šæ¬¡æ‰§è¡Œçš„å¯¹æ¯”åˆ†æ

#### 5.1.2 è‡ªåŠ¨åŒ–é™„ä»¶
```python
# è‡ªåŠ¨é™„åŠ çš„å†…å®¹
- æµ‹è¯•æ—¥å¿— (TEXT)
- å¤±è´¥æˆªå›¾ (PNG)
- æµ‹è¯•è§†é¢‘ (MP4)
- é¡µé¢æºç  (HTML)
- ç½‘ç»œè¯·æ±‚ (JSON)
```

### 5.2 æ—¥å¿—ç³»ç»Ÿ

#### 5.2.1 åˆ†çº§æ—¥å¿—
```python
# æ—¥å¿—çº§åˆ«é…ç½®
logger.debug("è°ƒè¯•ä¿¡æ¯")      # å¼€å‘è°ƒè¯•
logger.info("æ“ä½œä¿¡æ¯")       # æ­£å¸¸æ“ä½œ
logger.warning("è­¦å‘Šä¿¡æ¯")    # æ½œåœ¨é—®é¢˜
logger.error("é”™è¯¯ä¿¡æ¯")      # æ‰§è¡Œé”™è¯¯
logger.critical("ä¸¥é‡é”™è¯¯")   # ç³»ç»Ÿçº§é”™è¯¯
```

#### 5.2.2 æ—¥å¿—è¾“å‡º
- **æ§åˆ¶å°è¾“å‡º**: å®æ—¶æŸ¥çœ‹æµ‹è¯•æ‰§è¡Œ
- **æ–‡ä»¶è¾“å‡º**: æŒä¹…åŒ–ä¿å­˜åˆ°reports/pytest.log
- **Allureé›†æˆ**: è‡ªåŠ¨é™„åŠ åˆ°æµ‹è¯•æŠ¥å‘Š

## 6. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 6.1 æ‰§è¡Œæ•ˆç‡ä¼˜åŒ–

#### 6.1.1 æµè§ˆå™¨å¤ç”¨
- ç±»çº§åˆ«æµè§ˆå™¨å®ä¾‹å¤ç”¨
- ä¸Šä¸‹æ–‡çº§åˆ«éš”ç¦»
- æ™ºèƒ½èµ„æºæ¸…ç†

#### 6.1.2 å¹¶è¡Œæ‰§è¡Œ
```bash
# æ”¯æŒå¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
pytest -n auto testcase/
```

### 6.2 èµ„æºç®¡ç†

#### 6.2.1 å†…å­˜ä¼˜åŒ–
- åŠæ—¶å…³é—­é¡µé¢å’Œä¸Šä¸‹æ–‡
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- æ™ºèƒ½è§†é¢‘ä¿å­˜ç­–ç•¥

#### 6.2.2 å­˜å‚¨ä¼˜åŒ–
- æˆåŠŸæµ‹è¯•è‡ªåŠ¨æ¸…ç†è§†é¢‘
- å®šæœŸæ¸…ç†æ—§æŠ¥å‘Š
- å‹ç¼©æˆªå›¾æ–‡ä»¶

## 7. æ‰©å±•æ€§è®¾è®¡

### 7.1 æ’ä»¶åŒ–æ¶æ„

#### 7.1.1 Helperç³»ç»Ÿ
```python
# å¯æ‰©å±•çš„Helperç±»
class ScreenshotHelper:  # æˆªå›¾åŠŸèƒ½
class VideoHelper:       # è§†é¢‘å½•åˆ¶
class DatabaseHelper:    # æ•°æ®åº“æ“ä½œ (å¯æ‰©å±•)
class APIHelper:         # APIæµ‹è¯• (å¯æ‰©å±•)
```

#### 7.1.2 é¡µé¢å¯¹è±¡æ‰©å±•
```python
# æ–°é¡µé¢ç±»ç»§æ‰¿BasePage
class NewFeaturePage(BasePage):
    """æ–°åŠŸèƒ½é¡µé¢"""
    
    def __init__(self, page):
        super().__init__(page)
        # é¡µé¢ç‰¹å®šåˆå§‹åŒ–
```

### 7.2 é…ç½®æ‰©å±•

#### 7.2.1 ç¯å¢ƒé…ç½®
- æ”¯æŒæ–°ç¯å¢ƒæ·»åŠ 
- åŠ¨æ€é…ç½®åŠ è½½
- ç¯å¢ƒå˜é‡è¦†ç›–

#### 7.2.2 æµè§ˆå™¨æ‰©å±•
```python
# æ”¯æŒæ–°æµè§ˆå™¨ç±»å‹
browsers = {
    'chromium': playwright.chromium,
    'firefox': playwright.firefox,
    'webkit': playwright.webkit,
    'edge': playwright.chromium  # å¯æ‰©å±•
}
```

## 8. æœ€ä½³å®è·µ

### 8.1 ä»£ç è§„èŒƒ

#### 8.1.1 å‘½åè§„èŒƒ
- æµ‹è¯•ç±»: `Test{åŠŸèƒ½å}`
- æµ‹è¯•æ–¹æ³•: `test_{å…·ä½“åœºæ™¯}`
- é¡µé¢ç±»: `{é¡µé¢å}Page`
- å·¥å…·ç±»: `{åŠŸèƒ½å}Helper`

#### 8.1.2 æ–‡æ¡£è§„èŒƒ
- ç±»å’Œæ–¹æ³•æ·»åŠ docstring
- å¤æ‚é€»è¾‘æ·»åŠ æ³¨é‡Š
- READMEæ–‡æ¡£ç»´æŠ¤

### 8.2 æµ‹è¯•è®¾è®¡åŸåˆ™

#### 8.2.1 ç‹¬ç«‹æ€§åŸåˆ™
- æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œ
- ä¸ä¾èµ–å…¶ä»–æµ‹è¯•ç»“æœ
- æ¸…ç†æµ‹è¯•æ•°æ®

#### 8.2.2 å¯ç»´æŠ¤æ€§åŸåˆ™
- é¡µé¢å¯¹è±¡æ¨¡å¼
- æ•°æ®ä¸ä»£ç åˆ†ç¦»
- é…ç½®å¤–éƒ¨åŒ–

### 8.3 é”™è¯¯å¤„ç†

#### 8.3.1 å¼‚å¸¸æ•è·
```python
try:
    # æµ‹è¯•æ“ä½œ
    self.page.click(selector)
except Exception as e:
    # è®°å½•é”™è¯¯ä¿¡æ¯
    self.logger.error(f"ç‚¹å‡»æ“ä½œå¤±è´¥: {e}")
    # æˆªå›¾ä¿å­˜è¯æ®
    self.take_screenshot("error_screenshot")
    raise
```

#### 8.3.2 é‡è¯•æœºåˆ¶
```python
@retry(stop=stop_after_attempt(3), wait=wait_fixed(1))
def click_with_retry(self, selector):
    """å¸¦é‡è¯•çš„ç‚¹å‡»æ“ä½œ"""
    self.page.click(selector)
```

## 9. éƒ¨ç½²å’Œè¿ç»´

### 9.1 CI/CDé›†æˆ

#### 9.1.1 Jenkinsé›†æˆ
```groovy
pipeline {
    stages {
        stage('Test') {
            steps {
                sh 'python -m pytest testcase --alluredir=reports/allure-results'
            }
        }
        stage('Report') {
            steps {
                allure([
                    includeProperties: false,
                    jdk: '',
                    properties: [],
                    reportBuildPolicy: 'ALWAYS',
                    results: [[path: 'reports/allure-results']]
                ])
            }
        }
    }
}
```

#### 9.1.2 GitHub Actions
```yaml
name: Playwright Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          playwright install
      - name: Run tests
        run: pytest testcase --alluredir=allure-results
      - name: Generate report
        run: allure generate allure-results -o allure-report
```

### 9.2 ç›‘æ§å’Œå‘Šè­¦

#### 9.2.1 æµ‹è¯•ç»“æœç›‘æ§
- æˆåŠŸç‡è¶‹åŠ¿ç›‘æ§
- å¤±è´¥ç”¨ä¾‹åˆ†æ
- æ€§èƒ½æŒ‡æ ‡è·Ÿè¸ª

#### 9.2.2 å‘Šè­¦æœºåˆ¶
- æµ‹è¯•å¤±è´¥é‚®ä»¶é€šçŸ¥
- å…³é”®ç”¨ä¾‹å¤±è´¥å‘Šè­¦
- æ€§èƒ½å¼‚å¸¸æé†’

## 10. æ€»ç»“

### 10.1 æŠ€æœ¯ä¼˜åŠ¿

1. **å®Œæ•´çš„æµ‹è¯•ç”Ÿæ€**: ä»æµ‹è¯•æ‰§è¡Œåˆ°æŠ¥å‘Šç”Ÿæˆçš„å®Œæ•´é“¾è·¯
2. **é«˜åº¦è‡ªåŠ¨åŒ–**: è‡ªåŠ¨æˆªå›¾ã€å½•åˆ¶ã€æ—¥å¿—æ”¶é›†
3. **è‰¯å¥½çš„æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•æ–°åŠŸèƒ½
4. **ä¸°å¯Œçš„æŠ¥å‘Š**: Allureæä¾›ä¸“ä¸šçº§æµ‹è¯•æŠ¥å‘Š
5. **ç¨³å®šå¯é **: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### 10.2 åº”ç”¨åœºæ™¯

- **Webåº”ç”¨å›å½’æµ‹è¯•**: è‡ªåŠ¨åŒ–éªŒè¯æ ¸å¿ƒåŠŸèƒ½
- **å¤šæµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•**: ç¡®ä¿è·¨æµè§ˆå™¨ä¸€è‡´æ€§
- **UIè‡ªåŠ¨åŒ–æµ‹è¯•**: éªŒè¯ç”¨æˆ·ç•Œé¢å’Œäº¤äº’
- **æŒç»­é›†æˆæµ‹è¯•**: é›†æˆåˆ°CI/CDæµæ°´çº¿
- **æ€§èƒ½ç›‘æ§æµ‹è¯•**: ç›‘æ§é¡µé¢åŠ è½½å’Œå“åº”æ—¶é—´

### 10.3 æœªæ¥è§„åˆ’

1. **ç§»åŠ¨ç«¯æ”¯æŒ**: æ‰©å±•æ”¯æŒç§»åŠ¨æµè§ˆå™¨æµ‹è¯•
2. **APIæµ‹è¯•é›†æˆ**: æ·»åŠ APIè‡ªåŠ¨åŒ–æµ‹è¯•èƒ½åŠ›
3. **æ€§èƒ½æµ‹è¯•**: é›†æˆæ€§èƒ½æµ‹è¯•å·¥å…·
4. **AIè¾…åŠ©**: æ™ºèƒ½å…ƒç´ å®šä½å’Œæµ‹è¯•ç”Ÿæˆ
5. **äº‘ç«¯æ‰§è¡Œ**: æ”¯æŒäº‘ç«¯åˆ†å¸ƒå¼æµ‹è¯•æ‰§è¡Œ

è¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆä¸ºWebè‡ªåŠ¨åŒ–æµ‹è¯•æä¾›äº†å®Œæ•´ã€å¯é ã€æ˜“æ‰©å±•çš„è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿæ»¡è¶³ä¸åŒè§„æ¨¡é¡¹ç›®çš„æµ‹è¯•éœ€æ±‚ã€‚